# üîß ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Google Maps API: REQUEST_DENIED

## ‚ùå ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö

```
REQUEST_DENIED - This API key is not authorized to use this service or API
```

## ‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö)

### 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Places API ‡∏ñ‡∏π‡∏Å‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà [Google Cloud Console](https://console.cloud.google.com/)
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ API Key ‡∏ô‡∏µ‡πâ
3. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **APIs & Services** ‚Üí **Library** (‡∏´‡∏£‡∏∑‡∏≠ [‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà](https://console.cloud.google.com/apis/library))
4. ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ **"Places API"**
5. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÅ‡∏™‡∏î‡∏á **"API enabled"** (‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß)
6. ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡∏¥‡∏î ‚Üí ‡∏Ñ‡∏•‡∏¥‡∏Å **"Enable"**

**‚ö†Ô∏è ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç**: ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô **Places API** (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏Ñ‡πà Geocoding API)

### 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API Key Restrictions

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **APIs & Services** ‚Üí **Credentials**
2. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà API Key ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö **"API restrictions"**:
   - ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **"Restrict key"** ‚Üí ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **"Places API"** ‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
   - ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô **"Don't restrict key"** (‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö)

### 3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Billing

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Billing** ‚Üí [‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà](https://console.cloud.google.com/billing)
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ **Billing Account** ‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡πÅ‡∏•‡πâ‡∏ß
3. ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á Billing Account ‡πÅ‡∏•‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ
4. **‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏á‡∏ß‡∏•**: Google ‡πÉ‡∏´‡πâ $200 credit/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (Free Tier)

### 4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Quotas

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **APIs & Services** ‚Üí **Dashboard**
2. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà **Places API**
3. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Quotas** tab
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Quota ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏ï‡πá‡∏°

### 5. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API Key ‡πÉ‡∏ô Railway

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà [Railway Dashboard](https://railway.app/)
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ Backend
3. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Variables** tab
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ `GOOGLE_MAPS_API_KEY` ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:
   - ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô API Key ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ `AIzaSy...`)
   - ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏±‡∏Å‡∏Ç‡∏£‡∏∞‡∏û‡∏¥‡πÄ‡∏®‡∏©
   - Copy-paste ‡∏°‡∏≤‡∏à‡∏≤‡∏Å Google Cloud Console

### 6. Restart Service

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:
1. ‡πÉ‡∏ô Railway ‚Üí ‡∏Ñ‡∏•‡∏¥‡∏Å **"Redeploy"** ‡∏´‡∏£‡∏∑‡∏≠ restart service
2. ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≠‡πÉ‡∏´‡πâ Railway restart ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 1-2 ‡∏ô‡∏≤‡∏ó‡∏µ)

---

## üß™ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß:

1. ‡∏£‡∏≠‡πÉ‡∏´‡πâ Railway restart ‡πÄ‡∏™‡∏£‡πá‡∏à (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 1-2 ‡∏ô‡∏≤‡∏ó‡∏µ)
2. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `/ai-agent` ‚Üí ‡πÅ‡∏ó‡πá‡∏ö "Google Maps"
3. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° **"‡∏ó‡∏î‡∏™‡∏≠‡∏ö API Key"**
4. ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:
   ```
   ‚úÖ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
   Google Maps API Key ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ!
   ‡∏û‡∏ö X ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà
   ```

---

## üìã Checklist ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

- [ ] ‚úÖ Places API ‡∏ñ‡∏π‡∏Å‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß (API enabled)
- [ ] ‚úÖ API Key Restrictions ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ Places API
- [ ] ‚úÖ Billing Account ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡πÅ‡∏•‡πâ‡∏ß
- [ ] ‚úÖ API Key ‡πÉ‡∏ô Railway ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡πÑ‡∏°‡πà‡∏°‡∏µ typo)
- [ ] ‚úÖ Railway service restart ‡πÅ‡∏•‡πâ‡∏ß

---

## üîç ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

### ‡∏ó‡∏î‡∏™‡∏≠‡∏ö API Key ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á

‡∏•‡∏≠‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö API Key ‡∏î‡πâ‡∏ß‡∏¢ curl:

```bash
# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Places API Text Search
curl "https://maps.googleapis.com/maps/api/place/textsearch/json?query=‡∏£‡πâ‡∏≤‡∏ô‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ+‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û&key=YOUR_API_KEY&language=th&region=th"
```

**‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå** ‚Üí API Key ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö  
**‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ REQUEST_DENIED** ‚Üí ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô

---

## üí° Tips

1. **API Key Restrictions**: ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡πÉ‡∏à ‡πÉ‡∏´‡πâ‡∏•‡∏ö restrictions ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô
2. **Billing**: Google ‡πÉ‡∏´‡πâ $200 credit/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏ã‡∏∂‡πà‡∏á‡∏û‡∏≠‡πÉ‡∏ä‡πâ‡∏°‡∏≤‡∏Å (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 6,000+ requests)
3. **Places API vs Geocoding API**: ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô **Places API** (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏Ñ‡πà Geocoding)

---

## üìû ‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ

1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö logs ‡πÉ‡∏ô Railway Dashboard
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Google Cloud Console ‚Üí APIs & Services ‚Üí Enabled APIs
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Billing ‚Üí Usage & Billing

---

**Last Updated**: 2024-12-19

