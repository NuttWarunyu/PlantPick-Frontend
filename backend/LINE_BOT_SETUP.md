# ЁЯУ▒ LINE Bot Setup Guide

**р╕Др╕╣р╣Ир╕бр╕╖р╕нр╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ LINE Bot р╕кр╕│р╕лр╕гр╕▒р╕Ъ PlantPick**

---

## ЁЯЪА Quick Setup

### Step 1: р╕кр╕гр╣Йр╕▓р╕З LINE Bot

1. р╣Др╕Ыр╕Чр╕╡р╣И https://developers.line.biz/
2. Login р╕Фр╣Йр╕зр╕в LINE Account
3. р╕кр╕гр╣Йр╕▓р╕З **Provider** (р╕Цр╣Йр╕▓р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡)
4. р╕кр╕гр╣Йр╕▓р╕З **Channel** тЖТ р╣Ар╕ер╕╖р╕нр╕Б **Messaging API**
5. р╕Хр╕▒р╣Йр╕Зр╕Кр╕╖р╣Ир╕н Bot р╣Бр╕ер╕░р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Юр╕╖р╣Йр╕Щр╕Рр╕▓р╕Щ

### Step 2: р╕гр╕▒р╕Ъ Credentials

1. р╣Др╕Ыр╕Чр╕╡р╣И Channel Settings тЖТ **Messaging API**
2. Copy **Channel Access Token** (р╕вр╕▓р╕зр╣Ж)
3. Copy **Channel Secret** (р╕вр╕▓р╕зр╣Ж)
4. р╣Ар╕Бр╣Зр╕Ър╣Др╕зр╣Йр╕кр╕│р╕лр╕гр╕▒р╕Ъ Step 3

### Step 3: р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Environment Variables

р╣Ар╕Юр╕┤р╣Ир╕бр╣Гр╕Щ Railway Dashboard тЖТ Variables:

```env
LINE_CHANNEL_ACCESS_TOKEN=your_channel_access_token_here
LINE_CHANNEL_SECRET=your_channel_secret_here
```

р╕лр╕гр╕╖р╕нр╣Гр╕Щ `.env` file (local development):

```env
LINE_CHANNEL_ACCESS_TOKEN=your_channel_access_token_here
LINE_CHANNEL_SECRET=your_channel_secret_here
```

### Step 4: р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Webhook URL

1. р╣Др╕Ыр╕Чр╕╡р╣И Channel Settings тЖТ **Messaging API** тЖТ **Webhook settings**
2. р╣Гр╕кр╣И Webhook URL: `https://your-backend.railway.app/api/line/webhook`
3. р╕Бр╕Ф **Verify** (р╕Др╕зр╕гр╣Бр╕кр╕Фр╕З "Success")
4. Enable **Use webhook**

### Step 5: Deploy

1. Push code р╣Др╕Ы GitHub
2. Railway р╕Ир╕░ auto-deploy
3. р╕гр╕нр╣Гр╕лр╣Й deploy р╣Ар╕кр╕гр╣Зр╕И

### Step 6: р╕Чр╕Фр╕кр╕нр╕Ъ

1. р╣Ар╕Юр╕┤р╣Ир╕б Bot р╣Ар╕Ыр╣Зр╕Щр╣Ар╕Юр╕╖р╣Ир╕нр╕Щр╣Гр╕Щ LINE
2. р╕кр╣Ир╕Зр╕гр╕╣р╕Ыр╕Ър╕┤р╕ер╣Др╕Ыр╕Чр╕Фр╕кр╕нр╕Ъ
3. Bot р╕Др╕зр╕гр╕Хр╕нр╕Ър╕Бр╕ер╕▒р╕Ър╕бр╕▓р╕Фр╣Йр╕зр╕вр╕Ьр╕ер╕Бр╕▓р╕гр╕кр╣Бр╕Бр╕Щ

---

## ЁЯУ▒ р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф

### Basic Commands
- **р╕кр╣Ир╕Зр╕гр╕╣р╕Ыр╕Ър╕┤р╕е** тЖТ р╕кр╣Бр╕Бр╕Щр╕Ър╕┤р╕ер╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
- `/help` тЖТ р╣Бр╕кр╕Фр╕Зр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф

### Project Management
- `/newproject <р╕Кр╕╖р╣Ир╕н>` тЖТ р╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Ыр╕гр╣Ар╕Ир╕Др╣Гр╕лр╕бр╣И
  - р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З: `/newproject р╕Ър╣Йр╕▓р╕Щр╕лр╕ер╕▒р╕Зр╣Гр╕лр╕бр╣И`
- `/projects` тЖТ р╕Фр╕╣р╕гр╕▓р╕вр╕Бр╕▓р╕гр╣Вр╕Ыр╕гр╣Ар╕Ир╕Др╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф

### Reports & Summary
- `/summary <р╕Кр╕╖р╣Ир╕нр╣Вр╕Ыр╕гр╣Ар╕Ир╕Д>` тЖТ р╕кр╕гр╕╕р╕Ыр╕Др╣Ир╕▓р╣Гр╕Кр╣Йр╕Ир╣Ир╕▓р╕вр╣Вр╕Ыр╕гр╣Ар╕Ир╕Д
  - р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З: `/summary р╕Ър╣Йр╕▓р╕Щр╕лр╕ер╕▒р╕Зр╣Гр╕лр╕бр╣И`
- `/report р╣Ар╕Фр╕╖р╕нр╕Щр╕Щр╕╡р╣Й` тЖТ р╕кр╕гр╕╕р╕Ыр╕гр╕▓р╕вр╣Ар╕Фр╕╖р╕нр╕Щ

---

## ЁЯФз Troubleshooting

### Problem: Webhook verification fails
**Solution**: 
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ Webhook URL р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ LINE_CHANNEL_SECRET р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ server р╕Чр╕│р╕Зр╕▓р╕Щр╕нр╕вр╕╣р╣И

### Problem: Bot р╣Др╕бр╣Ир╕Хр╕нр╕Ър╕Бр╕ер╕▒р╕Ъ
**Solution**:
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ logs р╣Гр╕Щ Railway
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ LINE_CHANNEL_ACCESS_TOKEN р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ webhook enabled р╣Бр╕ер╣Йр╕з

### Problem: Error "Cannot find module '@line/bot-sdk'"
**Solution**:
- р╕гр╕▒р╕Щ `npm install` р╣Гр╕Щ backend directory
- р╕лр╕гр╕╖р╕нр╕гр╕нр╣Гр╕лр╣Й Railway install dependencies р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤

### Problem: Database error
**Solution**:
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ DATABASE_URL р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ tables р╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕ер╣Йр╕з (р╕Ир╕░р╕кр╕гр╣Йр╕▓р╕Зр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╣Ар╕бр╕╖р╣Ир╕н start server)

---

## ЁЯУК Database Tables

р╕гр╕░р╕Ър╕Ър╕Ир╕░р╕кр╕гр╣Йр╕▓р╕З tables р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╣Ар╕бр╕╖р╣Ир╕н start server:

1. **projects** - р╣Ар╕Бр╣Зр╕Ър╣Вр╕Ыр╕гр╣Ар╕Ир╕Др╕Вр╕нр╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
2. **bill_projects** - р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Ър╕┤р╕ер╕Бр╕▒р╕Ър╣Вр╕Ыр╕гр╣Ар╕Ир╕Д
3. **bill_users** - р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Ър╕┤р╕ер╕Бр╕▒р╕Ър╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й LINE

---

## ЁЯОп Features

### тЬЕ Implemented
- тЬЕ р╕кр╣Бр╕Бр╕Щр╕Ър╕┤р╕ер╕Фр╣Йр╕зр╕в AI (GPT-4o Vision)
- тЬЕ р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Ър╕┤р╕ер╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
- тЬЕ р╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Ыр╕гр╣Ар╕Ир╕Д
- тЬЕ Link р╕Ър╕┤р╕ер╕Бр╕▒р╕Ър╣Вр╕Ыр╕гр╣Ар╕Ир╕Д
- тЬЕ р╕кр╕гр╕╕р╕Ыр╕Др╣Ир╕▓р╣Гр╕Кр╣Йр╕Ир╣Ир╕▓р╕вр╣Вр╕Ыр╕гр╣Ар╕Ир╕Д
- тЬЕ р╕кр╕гр╕╕р╕Ыр╕гр╕▓р╕вр╣Ар╕Фр╕╖р╕нр╕Щ

### ЁЯЪз Coming Soon
- тЪая╕П Export PDF
- тЪая╕П р╕кр╣Ир╕З Email reports
- тЪая╕П Budget tracking
- тЪая╕П Advanced analytics

---

## ЁЯТб Tips

1. **Test р╕бр╕▓р╕Бр╣Ж**: р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▒р╕Ър╕Ър╕┤р╕ер╕Ир╕гр╕┤р╕Зр╕лр╕ер╕▓р╕вр╣Ж р╣Бр╕Ър╕Ъ
2. **Monitor Logs**: р╕Фр╕╣ logs р╣Гр╕Щ Railway р╣Ар╕Юр╕╖р╣Ир╕н debug
3. **User Feedback**: р╣Ар╕Бр╣Зр╕Ъ feedback р╕Ир╕▓р╕Бр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Ар╕Юр╕╖р╣Ир╕нр╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕З
4. **Error Handling**: Bot р╕Ир╕░р╕кр╣Ир╕З error message р╕Бр╕ер╕▒р╕Ър╣Др╕Ыр╣Гр╕лр╣Йр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й

---

## ЁЯУЮ Support

р╕Цр╣Йр╕▓р╕бр╕╡р╕Ыр╕▒р╕Нр╕лр╕▓:
1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ logs р╣Гр╕Щ Railway Dashboard
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ LINE Developers Console
3. р╕Чр╕Фр╕кр╕нр╕Ъ webhook р╕Фр╣Йр╕зр╕в LINE Webhook Tester

---

**Ready to use!** ЁЯЪА

